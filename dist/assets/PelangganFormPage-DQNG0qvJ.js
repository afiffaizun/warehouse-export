import{d as U,A as C,a as i,b as t,p as k,j as u,t as r,g as o,v as n,z as b,F as g,s as y,D as w,x as T,w as B,B as A,m as N,r as P,k as I,o as d}from"./index-PsAw_y75.js";import{a as D,c as L,s as M,p as _,m as p}from"./pelanggan-DRJWW-Qu.js";import{A as h}from"./arrow-left-EjXa5ctL.js";import{S as K}from"./save-D75v_NmT.js";const O={class:"space-y-6"},E={class:"flex items-center gap-4"},j={class:"text-2xl font-display font-bold text-text-primary"},q={class:"text-text-secondary mt-1"},F={class:"lg:col-span-2 space-y-6"},R={class:"card p-6"},W={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},z={class:"form-group md:col-span-2"},J={class:"form-group md:col-span-2"},Y={class:"form-group"},G=["value"],H={class:"form-group"},Q={class:"form-group"},X={class:"form-group"},Z={class:"card p-6"},$={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ee={class:"form-group"},te={class:"form-group"},se={class:"form-group"},ae={class:"card p-6"},le={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},oe={class:"form-group"},ne={class:"form-group"},ie={class:"card p-6"},de={class:"space-y-6"},re={class:"card p-6"},ue={class:"space-y-4"},pe={class:"form-group"},me=["value"],ve={class:"form-group"},ce={class:"flex gap-4"},be={class:"flex items-center gap-2 cursor-pointer"},ge={class:"flex items-center gap-2 cursor-pointer"},ye={class:"card p-6"},fe={class:"space-y-4"},xe={class:"form-group"},ke={class:"form-group"},we=["value"],Ne={class:"card p-6"},Pe={class:"space-y-3"},Se=["disabled"],Ae=U({__name:"PelangganFormPage",setup(Ve){const f=I(),m=A(),v=N(()=>!!m.params.id),S=N(()=>v.value?"Edit Pelanggan":"Tambah Pelanggan"),c=P(!1),a=P({companyName:"",address:"",country:"",city:"",postalCode:"",contactPerson:"",email:"",phone:"",website:"",segment:"new",status:"aktif",creditLimit:0,paymentTerms:"dp_30",npwp:"",nik:"",notes:""});C(()=>{if(v.value&&m.params.id){const l=D(Number(m.params.id));l&&(a.value={companyName:l.companyName,address:l.address,country:l.country,city:l.city,postalCode:l.postalCode,contactPerson:l.contactPerson,email:l.email,phone:l.phone,website:l.website||"",segment:l.segment,status:l.status,creditLimit:l.creditLimit,paymentTerms:l.paymentTerms,npwp:l.npwp||"",nik:l.nik||"",notes:l.notes||""})}});const x=()=>{f.back()},V=async()=>{if(!a.value.companyName||!a.value.contactPerson||!a.value.email){alert("Mohon lengkapi form yang wajib diisi");return}c.value=!0;try{if(await new Promise(l=>setTimeout(l,500)),v.value){const l=p.findIndex(e=>e.id===Number(m.params.id));if(l!==-1){const e=p[l];p[l]={...e,...a.value,documents:e.documents,totalOrders:e.totalOrders,totalSpent:e.totalSpent,updatedAt:new Date().toISOString()}}}else{const l=Math.max(...p.map(e=>e.id))+1;p.push({id:l,...a.value,documents:[],totalOrders:0,totalSpent:0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})}f.push({name:"pelanggan"})}catch(l){console.error("Error saving buyer:",l)}finally{c.value=!1}};return(l,e)=>(d(),i("div",O,[t("div",E,[t("button",{onClick:x,class:"btn-icon btn-ghost"},[k(u(h),{class:"w-5 h-5"})]),t("div",null,[t("h1",j,r(S.value),1),t("p",q,r(v.value?"Perbarui data pelanggan":"Tambah pelanggan baru"),1)])]),t("form",{onSubmit:B(V,["prevent"]),class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},[t("div",F,[t("div",R,[e[24]||(e[24]=t("h2",{class:"font-semibold text-text-primary mb-4"},"Informasi Perusahaan",-1)),t("div",W,[t("div",z,[e[17]||(e[17]=t("label",{class:"label label-required"},"Nama Perusahaan",-1)),o(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>a.value.companyName=s),type:"text",class:"input",placeholder:"Contoh: ABC Corporation"},null,512),[[n,a.value.companyName]])]),t("div",J,[e[18]||(e[18]=t("label",{class:"label"},"Alamat",-1)),o(t("textarea",{"onUpdate:modelValue":e[1]||(e[1]=s=>a.value.address=s),class:"textarea",rows:"2",placeholder:"Alamat lengkap..."},null,512),[[n,a.value.address]])]),t("div",Y,[e[20]||(e[20]=t("label",{class:"label"},"Negara",-1)),o(t("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>a.value.country=s),class:"select"},[e[19]||(e[19]=t("option",{value:""},"Pilih Negara",-1)),(d(!0),i(g,null,y(u(L),s=>(d(),i("option",{key:s.code,value:s.name},r(s.name),9,G))),128))],512),[[b,a.value.country]])]),t("div",H,[e[21]||(e[21]=t("label",{class:"label"},"Kota",-1)),o(t("input",{"onUpdate:modelValue":e[3]||(e[3]=s=>a.value.city=s),type:"text",class:"input",placeholder:"Contoh: New York"},null,512),[[n,a.value.city]])]),t("div",Q,[e[22]||(e[22]=t("label",{class:"label"},"Kode Pos",-1)),o(t("input",{"onUpdate:modelValue":e[4]||(e[4]=s=>a.value.postalCode=s),type:"text",class:"input",placeholder:"Contoh: 10001"},null,512),[[n,a.value.postalCode]])]),t("div",X,[e[23]||(e[23]=t("label",{class:"label"},"Website",-1)),o(t("input",{"onUpdate:modelValue":e[5]||(e[5]=s=>a.value.website=s),type:"text",class:"input",placeholder:"https://..."},null,512),[[n,a.value.website]])])])]),t("div",Z,[e[28]||(e[28]=t("h2",{class:"font-semibold text-text-primary mb-4"},"Informasi Kontak",-1)),t("div",$,[t("div",ee,[e[25]||(e[25]=t("label",{class:"label label-required"},"Nama Kontak",-1)),o(t("input",{"onUpdate:modelValue":e[6]||(e[6]=s=>a.value.contactPerson=s),type:"text",class:"input",placeholder:"Contoh: John Smith"},null,512),[[n,a.value.contactPerson]])]),t("div",te,[e[26]||(e[26]=t("label",{class:"label label-required"},"Email",-1)),o(t("input",{"onUpdate:modelValue":e[7]||(e[7]=s=>a.value.email=s),type:"email",class:"input",placeholder:"email@company.com"},null,512),[[n,a.value.email]])]),t("div",se,[e[27]||(e[27]=t("label",{class:"label"},"Telepon",-1)),o(t("input",{"onUpdate:modelValue":e[8]||(e[8]=s=>a.value.phone=s),type:"text",class:"input",placeholder:"+1 234-567-8900"},null,512),[[n,a.value.phone]])])])]),t("div",ae,[e[31]||(e[31]=t("h2",{class:"font-semibold text-text-primary mb-4"},"Dokumen",-1)),t("div",le,[t("div",oe,[e[29]||(e[29]=t("label",{class:"label"},"NPWP",-1)),o(t("input",{"onUpdate:modelValue":e[9]||(e[9]=s=>a.value.npwp=s),type:"text",class:"input",placeholder:"Nomor NPWP"},null,512),[[n,a.value.npwp]])]),t("div",ne,[e[30]||(e[30]=t("label",{class:"label"},"NIK",-1)),o(t("input",{"onUpdate:modelValue":e[10]||(e[10]=s=>a.value.nik=s),type:"text",class:"input",placeholder:"Nomor NIK"},null,512),[[n,a.value.nik]])])])]),t("div",ie,[e[32]||(e[32]=t("h2",{class:"font-semibold text-text-primary mb-4"},"Catatan",-1)),o(t("textarea",{"onUpdate:modelValue":e[11]||(e[11]=s=>a.value.notes=s),class:"textarea",rows:"3",placeholder:"Tambahkan catatan jika diperlukan..."},null,512),[[n,a.value.notes]])])]),t("div",de,[t("div",re,[e[37]||(e[37]=t("h2",{class:"font-semibold text-text-primary mb-4"},"Segmentasi & Status",-1)),t("div",ue,[t("div",pe,[e[33]||(e[33]=t("label",{class:"label"},"Segment",-1)),o(t("select",{"onUpdate:modelValue":e[12]||(e[12]=s=>a.value.segment=s),class:"select"},[(d(!0),i(g,null,y(u(M),s=>(d(),i("option",{key:s.value,value:s.value},r(s.label),9,me))),128))],512),[[b,a.value.segment]])]),t("div",ve,[e[36]||(e[36]=t("label",{class:"label"},"Status",-1)),t("div",ce,[t("label",be,[o(t("input",{type:"radio",value:"aktif","onUpdate:modelValue":e[13]||(e[13]=s=>a.value.status=s),class:"radio"},null,512),[[w,a.value.status]]),e[34]||(e[34]=t("span",{class:"text-sm"},"Aktif",-1))]),t("label",ge,[o(t("input",{type:"radio",value:"nonaktif","onUpdate:modelValue":e[14]||(e[14]=s=>a.value.status=s),class:"radio"},null,512),[[w,a.value.status]]),e[35]||(e[35]=t("span",{class:"text-sm"},"Non-aktif",-1))])])])])]),t("div",ye,[e[40]||(e[40]=t("h2",{class:"font-semibold text-text-primary mb-4"},"Kredit & Pembayaran",-1)),t("div",fe,[t("div",xe,[e[38]||(e[38]=t("label",{class:"label"},"Credit Limit (USD)",-1)),o(t("input",{"onUpdate:modelValue":e[15]||(e[15]=s=>a.value.creditLimit=s),type:"number",class:"input",placeholder:"0"},null,512),[[n,a.value.creditLimit,void 0,{number:!0}]])]),t("div",ke,[e[39]||(e[39]=t("label",{class:"label"},"Payment Terms",-1)),o(t("select",{"onUpdate:modelValue":e[16]||(e[16]=s=>a.value.paymentTerms=s),class:"select"},[(d(!0),i(g,null,y(u(_),s=>(d(),i("option",{key:s.value,value:s.value},r(s.label),9,we))),128))],512),[[b,a.value.paymentTerms]])])])]),t("div",Ne,[t("div",Pe,[t("button",{type:"submit",disabled:c.value,class:"btn-primary w-full"},[k(u(K),{class:"w-4 h-4"}),T(" "+r(c.value?"Menyimpan...":"Simpan"),1)],8,Se),t("button",{type:"button",onClick:x,class:"btn-outline w-full"}," Batal ")])])])],32)]))}});export{Ae as default};
