import{c as V,d as M,B as D,D as N,a as l,b as s,p as f,j as n,t as p,g as i,v as c,A as U,F as y,s as h,f as T,x as A,w as R,E as H,m as S,r as k,k as L,X as j,G as q,o as r}from"./index-CUmndf2P.js";import{b as E,c as G,u as F,s as K,m as v}from"./barang-CFxOeyqE.js";import{A as O}from"./arrow-left-Cpmr9AlM.js";import{S as J}from"./save-B4hMgu_F.js";const z=V("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]),X={class:"space-y-6"},$={class:"flex items-center gap-4"},Q={class:"text-2xl font-display font-bold text-text-primary"},W={class:"text-text-secondary mt-1"},Y={class:"lg:col-span-2 space-y-6"},Z={class:"card p-6"},ee={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},se={class:"form-group"},te={class:"form-group"},ae={class:"form-group"},oe=["value"],le={class:"form-group"},re=["value"],ie={class:"form-group md:col-span-2"},de={class:"card p-6"},ne={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ue={class:"form-group"},pe={class:"form-group"},ce={class:"card p-6"},me={class:"form-group"},ve={class:"space-y-6"},be={class:"card p-6"},ge={class:"space-y-4"},fe={key:0,class:"grid grid-cols-3 gap-2"},ye=["src"],he=["onClick"],ke={class:"border-2 border-dashed border-border rounded-lg p-6 text-center hover:border-accent-primary transition-colors"},xe={for:"image-upload",class:"cursor-pointer"},_e={class:"card p-6"},we={class:"space-y-2"},Ue=["value","onUpdate:modelValue"],Se={class:"font-medium"},Ce={class:"card p-6"},Pe={class:"space-y-3"},Ie=["disabled"],Ae=M({__name:"BarangFormPage",setup(Be){const x=L(),b=H(),_=D(),m=S(()=>!!b.params.id),C=S(()=>m.value?"Edit Barang":"Tambah Barang"),g=k(!1),o=k({name:"",sku:"",category:"batik",unit:"PCS",description:"",hsCode:"",priceIdr:0,priceUsd:0,status:"aktif"}),d=k([]);N(()=>{if(m.value&&b.params.id){const a=E(Number(b.params.id));a&&(o.value={name:a.name,sku:a.sku,category:a.category,unit:a.unit,description:a.description,hsCode:a.hsCode,priceIdr:a.priceIdr,priceUsd:a.priceUsd,status:a.status},d.value=a.images.map(e=>e.url))}});const P=a=>{const e=a.target;if(e.files&&e.files[0]){const t=e.files[0],u=URL.createObjectURL(t);d.value.push(u)}},I=a=>{d.value.splice(a,1)},w=()=>{x.back()},B=async()=>{if(!o.value.name||!o.value.sku||!o.value.category){_.error("Mohon lengkapi form yang wajib diisi");return}g.value=!0;try{if(await new Promise(a=>setTimeout(a,500)),m.value){const a=v.findIndex(e=>e.id===Number(b.params.id));a!==-1&&(v[a]={...v[a],...o.value,images:d.value.map((e,t)=>({id:t+1,url:e,isPrimary:t===0}))})}else{const a=Math.max(...v.map(e=>e.id))+1;v.push({id:a,...o.value,images:d.value.map((e,t)=>({id:t+1,url:e,isPrimary:t===0})),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})}_.success(m.value?"Produk berhasil diperbarui!":"Produk berhasil ditambahkan!"),x.push({name:"barang"})}catch(a){console.error("Error saving product:",a)}finally{g.value=!1}};return(a,e)=>(r(),l("div",X,[s("div",$,[s("button",{onClick:w,class:"btn-icon btn-ghost"},[f(n(O),{class:"w-5 h-5"})]),s("div",null,[s("h1",Q,p(C.value),1),s("p",W,p(m.value?"Perbarui data produk":"Tambah produk baru ke inventori"),1)])]),s("form",{onSubmit:R(B,["prevent"]),class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},[s("div",Y,[s("div",Z,[e[14]||(e[14]=s("h2",{class:"font-semibold text-text-primary mb-4"},"Informasi Dasar",-1)),s("div",ee,[s("div",se,[e[8]||(e[8]=s("label",{class:"label label-required"},"Nama Barang",-1)),i(s("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>o.value.name=t),type:"text",class:"input",placeholder:"Contoh: Batik Premium Motif Parang"},null,512),[[c,o.value.name]])]),s("div",te,[e[9]||(e[9]=s("label",{class:"label label-required"},"SKU",-1)),i(s("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>o.value.sku=t),type:"text",class:"input",placeholder:"Contoh: BAT-PAR-001"},null,512),[[c,o.value.sku]])]),s("div",ae,[e[10]||(e[10]=s("label",{class:"label label-required"},"Kategori",-1)),i(s("select",{"onUpdate:modelValue":e[2]||(e[2]=t=>o.value.category=t),class:"select"},[(r(!0),l(y,null,h(n(G),t=>(r(),l("option",{key:t.value,value:t.value},p(t.label),9,oe))),128))],512),[[U,o.value.category]])]),s("div",le,[e[11]||(e[11]=s("label",{class:"label"},"Satuan",-1)),i(s("select",{"onUpdate:modelValue":e[3]||(e[3]=t=>o.value.unit=t),class:"select"},[(r(!0),l(y,null,h(n(F),t=>(r(),l("option",{key:t,value:t},p(t),9,re))),128))],512),[[U,o.value.unit]])]),s("div",ie,[e[12]||(e[12]=s("label",{class:"label"},"HS Code",-1)),i(s("input",{"onUpdate:modelValue":e[4]||(e[4]=t=>o.value.hsCode=t),type:"text",class:"input",placeholder:"Contoh: 6204.42.00"},null,512),[[c,o.value.hsCode]]),e[13]||(e[13]=s("p",{class:"form-hint"},"Harmonized System Code untuk klasifikasi ekspor",-1))])])]),s("div",de,[e[17]||(e[17]=s("h2",{class:"font-semibold text-text-primary mb-4"},"Harga Jual",-1)),s("div",ne,[s("div",ue,[e[15]||(e[15]=s("label",{class:"label"},"Harga (IDR)",-1)),i(s("input",{"onUpdate:modelValue":e[5]||(e[5]=t=>o.value.priceIdr=t),type:"number",class:"input",placeholder:"0"},null,512),[[c,o.value.priceIdr,void 0,{number:!0}]])]),s("div",pe,[e[16]||(e[16]=s("label",{class:"label"},"Harga (USD)",-1)),i(s("input",{"onUpdate:modelValue":e[6]||(e[6]=t=>o.value.priceUsd=t),type:"number",step:"0.01",class:"input",placeholder:"0.00"},null,512),[[c,o.value.priceUsd,void 0,{number:!0}]])])])]),s("div",ce,[e[18]||(e[18]=s("h2",{class:"font-semibold text-text-primary mb-4"},"Deskripsi",-1)),s("div",me,[i(s("textarea",{"onUpdate:modelValue":e[7]||(e[7]=t=>o.value.description=t),class:"textarea",rows:"4",placeholder:"Deskripsi produk..."},null,512),[[c,o.value.description]])])])]),s("div",ve,[s("div",be,[e[21]||(e[21]=s("h2",{class:"font-semibold text-text-primary mb-4"},"Gambar Produk",-1)),s("div",ge,[d.value.length>0?(r(),l("div",fe,[(r(!0),l(y,null,h(d.value,(t,u)=>(r(),l("div",{key:u,class:"relative aspect-square rounded-lg overflow-hidden bg-slate-100"},[s("img",{src:t,class:"w-full h-full object-cover"},null,8,ye),s("button",{type:"button",onClick:Ve=>I(u),class:"absolute top-1 right-1 p-1 bg-white rounded-full shadow text-red-500 hover:bg-red-50"},[f(n(j),{class:"w-3 h-3"})],8,he)]))),128))])):T("",!0),s("div",ke,[s("input",{type:"file",accept:"image/*",multiple:"",class:"hidden",id:"image-upload",onChange:P},null,32),s("label",xe,[f(n(z),{class:"w-8 h-8 mx-auto text-text-muted mb-2"}),e[19]||(e[19]=s("p",{class:"text-sm text-text-secondary"},"Klik untuk upload",-1)),e[20]||(e[20]=s("p",{class:"text-xs text-text-muted"},"PNG, JPG max 5MB",-1))])])])]),s("div",_e,[e[22]||(e[22]=s("h2",{class:"font-semibold text-text-primary mb-4"},"Status",-1)),s("div",we,[(r(!0),l(y,null,h(n(K),t=>(r(),l("label",{key:t.value,class:"flex items-center gap-3 p-3 rounded-lg border border-border cursor-pointer hover:bg-slate-50"},[i(s("input",{type:"radio",value:t.value,"onUpdate:modelValue":u=>o.value.status=u,class:"radio"},null,8,Ue),[[q,o.value.status]]),s("span",Se,p(t.label),1)]))),128))])]),s("div",Ce,[s("div",Pe,[s("button",{type:"submit",disabled:g.value,class:"btn-primary w-full"},[f(n(J),{class:"w-4 h-4"}),A(" "+p(g.value?"Menyimpan...":"Simpan"),1)],8,Ie),s("button",{type:"button",onClick:w,class:"btn-outline w-full"}," Batal ")])])])],32)]))}});export{Ae as default};
