import{c as B,d as V,A as M,a as l,b as s,p as f,j as n,t as p,g as i,v as c,z as w,F as y,s as h,f as D,x as N,w as A,B as R,m as U,r as x,k as T,D as H,o as r}from"./index-BSGSa2ke.js";import{b as L,c as j,u as q,s as E,m}from"./barang-CFxOeyqE.js";import{A as F}from"./arrow-left-DtqTnOez.js";import{S as G}from"./save-RugCkC1x.js";import{X as K}from"./x-CjUpjK_v.js";const O=B("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]),z={class:"space-y-6"},J={class:"flex items-center gap-4"},X={class:"text-2xl font-display font-bold text-text-primary"},$={class:"text-text-secondary mt-1"},Q={class:"lg:col-span-2 space-y-6"},W={class:"card p-6"},Y={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Z={class:"form-group"},ee={class:"form-group"},se={class:"form-group"},te=["value"],ae={class:"form-group"},oe=["value"],le={class:"form-group md:col-span-2"},re={class:"card p-6"},ie={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},de={class:"form-group"},ne={class:"form-group"},ue={class:"card p-6"},pe={class:"form-group"},ce={class:"space-y-6"},me={class:"card p-6"},ve={class:"space-y-4"},be={key:0,class:"grid grid-cols-3 gap-2"},ge=["src"],fe=["onClick"],ye={class:"border-2 border-dashed border-border rounded-lg p-6 text-center hover:border-accent-primary transition-colors"},he={for:"image-upload",class:"cursor-pointer"},xe={class:"card p-6"},ke={class:"space-y-2"},_e=["value","onUpdate:modelValue"],we={class:"font-medium"},Ue={class:"card p-6"},Ce={class:"space-y-3"},Se=["disabled"],Ae=V({__name:"BarangFormPage",setup(Ie){const k=T(),v=R(),b=U(()=>!!v.params.id),C=U(()=>b.value?"Edit Barang":"Tambah Barang"),g=x(!1),o=x({name:"",sku:"",category:"batik",unit:"PCS",description:"",hsCode:"",priceIdr:0,priceUsd:0,status:"aktif"}),d=x([]);M(()=>{if(b.value&&v.params.id){const a=L(Number(v.params.id));a&&(o.value={name:a.name,sku:a.sku,category:a.category,unit:a.unit,description:a.description,hsCode:a.hsCode,priceIdr:a.priceIdr,priceUsd:a.priceUsd,status:a.status},d.value=a.images.map(e=>e.url))}});const S=a=>{const e=a.target;if(e.files&&e.files[0]){const t=e.files[0],u=URL.createObjectURL(t);d.value.push(u)}},I=a=>{d.value.splice(a,1)},_=()=>{k.back()},P=async()=>{if(!o.value.name||!o.value.sku||!o.value.category){alert("Mohon lengkapi form yang wajib diisi");return}g.value=!0;try{if(await new Promise(a=>setTimeout(a,500)),b.value){const a=m.findIndex(e=>e.id===Number(v.params.id));a!==-1&&(m[a]={...m[a],...o.value,images:d.value.map((e,t)=>({id:t+1,url:e,isPrimary:t===0}))})}else{const a=Math.max(...m.map(e=>e.id))+1;m.push({id:a,...o.value,images:d.value.map((e,t)=>({id:t+1,url:e,isPrimary:t===0})),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})}k.push({name:"barang"})}catch(a){console.error("Error saving product:",a)}finally{g.value=!1}};return(a,e)=>(r(),l("div",z,[s("div",J,[s("button",{onClick:_,class:"btn-icon btn-ghost"},[f(n(F),{class:"w-5 h-5"})]),s("div",null,[s("h1",X,p(C.value),1),s("p",$,p(b.value?"Perbarui data produk":"Tambah produk baru ke inventori"),1)])]),s("form",{onSubmit:A(P,["prevent"]),class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},[s("div",Q,[s("div",W,[e[14]||(e[14]=s("h2",{class:"font-semibold text-text-primary mb-4"},"Informasi Dasar",-1)),s("div",Y,[s("div",Z,[e[8]||(e[8]=s("label",{class:"label label-required"},"Nama Barang",-1)),i(s("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>o.value.name=t),type:"text",class:"input",placeholder:"Contoh: Batik Premium Motif Parang"},null,512),[[c,o.value.name]])]),s("div",ee,[e[9]||(e[9]=s("label",{class:"label label-required"},"SKU",-1)),i(s("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>o.value.sku=t),type:"text",class:"input",placeholder:"Contoh: BAT-PAR-001"},null,512),[[c,o.value.sku]])]),s("div",se,[e[10]||(e[10]=s("label",{class:"label label-required"},"Kategori",-1)),i(s("select",{"onUpdate:modelValue":e[2]||(e[2]=t=>o.value.category=t),class:"select"},[(r(!0),l(y,null,h(n(j),t=>(r(),l("option",{key:t.value,value:t.value},p(t.label),9,te))),128))],512),[[w,o.value.category]])]),s("div",ae,[e[11]||(e[11]=s("label",{class:"label"},"Satuan",-1)),i(s("select",{"onUpdate:modelValue":e[3]||(e[3]=t=>o.value.unit=t),class:"select"},[(r(!0),l(y,null,h(n(q),t=>(r(),l("option",{key:t,value:t},p(t),9,oe))),128))],512),[[w,o.value.unit]])]),s("div",le,[e[12]||(e[12]=s("label",{class:"label"},"HS Code",-1)),i(s("input",{"onUpdate:modelValue":e[4]||(e[4]=t=>o.value.hsCode=t),type:"text",class:"input",placeholder:"Contoh: 6204.42.00"},null,512),[[c,o.value.hsCode]]),e[13]||(e[13]=s("p",{class:"form-hint"},"Harmonized System Code untuk klasifikasi ekspor",-1))])])]),s("div",re,[e[17]||(e[17]=s("h2",{class:"font-semibold text-text-primary mb-4"},"Harga Jual",-1)),s("div",ie,[s("div",de,[e[15]||(e[15]=s("label",{class:"label"},"Harga (IDR)",-1)),i(s("input",{"onUpdate:modelValue":e[5]||(e[5]=t=>o.value.priceIdr=t),type:"number",class:"input",placeholder:"0"},null,512),[[c,o.value.priceIdr,void 0,{number:!0}]])]),s("div",ne,[e[16]||(e[16]=s("label",{class:"label"},"Harga (USD)",-1)),i(s("input",{"onUpdate:modelValue":e[6]||(e[6]=t=>o.value.priceUsd=t),type:"number",step:"0.01",class:"input",placeholder:"0.00"},null,512),[[c,o.value.priceUsd,void 0,{number:!0}]])])])]),s("div",ue,[e[18]||(e[18]=s("h2",{class:"font-semibold text-text-primary mb-4"},"Deskripsi",-1)),s("div",pe,[i(s("textarea",{"onUpdate:modelValue":e[7]||(e[7]=t=>o.value.description=t),class:"textarea",rows:"4",placeholder:"Deskripsi produk..."},null,512),[[c,o.value.description]])])])]),s("div",ce,[s("div",me,[e[21]||(e[21]=s("h2",{class:"font-semibold text-text-primary mb-4"},"Gambar Produk",-1)),s("div",ve,[d.value.length>0?(r(),l("div",be,[(r(!0),l(y,null,h(d.value,(t,u)=>(r(),l("div",{key:u,class:"relative aspect-square rounded-lg overflow-hidden bg-slate-100"},[s("img",{src:t,class:"w-full h-full object-cover"},null,8,ge),s("button",{type:"button",onClick:Pe=>I(u),class:"absolute top-1 right-1 p-1 bg-white rounded-full shadow text-red-500 hover:bg-red-50"},[f(n(K),{class:"w-3 h-3"})],8,fe)]))),128))])):D("",!0),s("div",ye,[s("input",{type:"file",accept:"image/*",multiple:"",class:"hidden",id:"image-upload",onChange:S},null,32),s("label",he,[f(n(O),{class:"w-8 h-8 mx-auto text-text-muted mb-2"}),e[19]||(e[19]=s("p",{class:"text-sm text-text-secondary"},"Klik untuk upload",-1)),e[20]||(e[20]=s("p",{class:"text-xs text-text-muted"},"PNG, JPG max 5MB",-1))])])])]),s("div",xe,[e[22]||(e[22]=s("h2",{class:"font-semibold text-text-primary mb-4"},"Status",-1)),s("div",ke,[(r(!0),l(y,null,h(n(E),t=>(r(),l("label",{key:t.value,class:"flex items-center gap-3 p-3 rounded-lg border border-border cursor-pointer hover:bg-slate-50"},[i(s("input",{type:"radio",value:t.value,"onUpdate:modelValue":u=>o.value.status=u,class:"radio"},null,8,_e),[[H,o.value.status]]),s("span",we,p(t.label),1)]))),128))])]),s("div",Ue,[s("div",Ce,[s("button",{type:"submit",disabled:g.value,class:"btn-primary w-full"},[f(n(G),{class:"w-4 h-4"}),N(" "+p(g.value?"Menyimpan...":"Simpan"),1)],8,Se),s("button",{type:"button",onClick:_,class:"btn-outline w-full"}," Batal ")])])])],32)]))}});export{Ae as default};
