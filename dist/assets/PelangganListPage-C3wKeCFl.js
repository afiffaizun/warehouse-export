import{d as z,a as n,b as t,p as g,j as u,x as _,z as O,g as w,v as q,A as L,F as y,s as C,X as I,f as S,t as l,w as Q,r as d,m as $,k as R,n as B,o}from"./index-CUmndf2P.js";import{s as X,c as G,m as J,g as A}from"./pelanggan-DRJWW-Qu.js";import{P as W}from"./plus-BEll3Vn4.js";import{E as Y}from"./eye-CdbcdQon.js";import{S as Z}from"./square-pen-BYVPhAE4.js";import{T as tt}from"./trash-2-BAvBQP-f.js";const et={class:"space-y-4"},st={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},at={class:"card p-4"},lt={class:"flex flex-col lg:flex-row gap-4"},nt={class:"flex-1 relative"},ot=["value"],it=["value"],ut={class:"card overflow-hidden"},dt={class:"table-container"},rt={class:"table"},ct={class:"font-mono text-sm text-text-muted"},mt={class:"font-medium text-text-primary"},vt={class:"text-sm text-text-muted"},pt={class:"text-sm text-text-primary"},gt={class:"text-xs text-text-muted"},xt={class:"badge badge-neutral"},ft={class:"text-right font-medium"},ht={class:"text-center"},kt={class:"font-medium"},bt={class:"flex items-center gap-1"},_t=["onClick"],wt=["onClick"],yt=["onClick"],Ct={key:0},St={key:0,class:"flex items-center justify-between px-4 py-3 border-t border-border"},Pt={class:"text-sm text-text-muted"},Nt={class:"flex items-center gap-2"},Tt=["disabled"],Lt={class:"flex gap-1"},$t=["onClick"],Bt=["disabled"],Vt={class:"modal-content max-w-sm"},At={class:"modal-body"},Dt={class:"text-text-secondary"},Mt={class:"text-text-primary"},Et={class:"modal-footer"},qt=z({__name:"PelangganListPage",setup(Ut){const P=R(),N=d([...J]),r=d(""),c=d(""),m=d(""),v=d(""),x=d(!1),f=d(null),i=d(1),p=d(10),h=$(()=>N.value.filter(a=>{const e=!r.value||a.companyName.toLowerCase().includes(r.value.toLowerCase())||a.contactPerson.toLowerCase().includes(r.value.toLowerCase()),s=!c.value||a.segment===c.value,k=!m.value||a.country===m.value,b=!v.value||a.status===v.value;return e&&s&&k&&b})),V=$(()=>{const a=(i.value-1)*p.value,e=a+p.value;return h.value.slice(a,e)}),T=$(()=>Math.ceil(h.value.length/p.value)),D=()=>{r.value="",c.value="",m.value="",v.value=""},M=()=>{P.push({name:"pelanggan-tambah"})},E=a=>{P.push({name:"pelanggan-detail",params:{id:a}})},U=a=>{P.push({name:"pelanggan-detail",params:{id:a}})},j=a=>{f.value=a,x.value=!0},F=()=>{f.value&&(N.value=N.value.filter(a=>a.id!==f.value?.id),x.value=!1,f.value=null)},H=a=>`$${a.toLocaleString()}`,K=a=>{switch(A(a).color){case"amber":return"badge-warning";case"cyan":return"badge-primary";case"emerald":return"badge-success";default:return"badge-neutral"}};return(a,e)=>(o(),n("div",et,[t("div",st,[e[9]||(e[9]=t("div",null,[t("h1",{class:"text-2xl font-display font-bold text-text-primary"},"Daftar Pelanggan"),t("p",{class:"text-text-secondary mt-1"},"Kelola data buyer/pelanggan ekspor")],-1)),t("button",{onClick:M,class:"btn-primary"},[g(u(W),{class:"w-4 h-4"}),e[8]||(e[8]=_(" Tambah Pelanggan ",-1))])]),t("div",at,[t("div",lt,[t("div",nt,[g(u(O),{class:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-text-muted"}),w(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>r.value=s),type:"text",placeholder:"Cari perusahaan atau kontak...",class:"input pl-10"},null,512),[[q,r.value]])]),w(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>c.value=s),class:"input w-full lg:w-40"},[e[10]||(e[10]=t("option",{value:""},"Semua Segment",-1)),(o(!0),n(y,null,C(u(X),s=>(o(),n("option",{key:s.value,value:s.value},l(s.label),9,ot))),128))],512),[[L,c.value]]),w(t("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>m.value=s),class:"input w-full lg:w-48"},[e[11]||(e[11]=t("option",{value:""},"Semua Negara",-1)),(o(!0),n(y,null,C(u(G),s=>(o(),n("option",{key:s.code,value:s.name},l(s.name),9,it))),128))],512),[[L,m.value]]),w(t("select",{"onUpdate:modelValue":e[3]||(e[3]=s=>v.value=s),class:"input w-full lg:w-32"},[...e[12]||(e[12]=[t("option",{value:""},"Semua Status",-1),t("option",{value:"aktif"},"Aktif",-1),t("option",{value:"nonaktif"},"Non-aktif",-1)])],512),[[L,v.value]]),r.value||c.value||m.value||v.value?(o(),n("button",{key:0,onClick:D,class:"btn-outline flex items-center gap-2"},[g(u(I),{class:"w-4 h-4"}),e[13]||(e[13]=_(" Clear ",-1))])):S("",!0)])]),t("div",ut,[t("div",dt,[t("table",rt,[e[15]||(e[15]=t("thead",null,[t("tr",null,[t("th",{class:"w-16"},"No"),t("th",null,"Perusahaan"),t("th",null,"Kontak"),t("th",null,"Negara"),t("th",null,"Segment"),t("th",{class:"text-right"},"Credit Limit"),t("th",{class:"text-center"},"Orders"),t("th",null,"Status"),t("th",{class:"w-32"},"Aksi")])],-1)),t("tbody",null,[(o(!0),n(y,null,C(V.value,(s,k)=>(o(),n("tr",{key:s.id},[t("td",ct,l((i.value-1)*p.value+k+1),1),t("td",null,[t("div",null,[t("p",mt,l(s.companyName),1),t("p",vt,l(s.city),1)])]),t("td",null,[t("div",null,[t("p",pt,l(s.contactPerson),1),t("p",gt,l(s.email),1)])]),t("td",null,[t("span",xt,l(s.country),1)]),t("td",null,[t("span",{class:B(["badge",K(s.segment)])},l(u(A)(s.segment).label),3)]),t("td",ft,l(H(s.creditLimit)),1),t("td",ht,[t("span",kt,l(s.totalOrders),1)]),t("td",null,[t("span",{class:B(["badge",s.status==="aktif"?"badge-success":"badge-secondary"])},l(s.status==="aktif"?"Aktif":"Non-aktif"),3)]),t("td",null,[t("div",bt,[t("button",{onClick:b=>U(s.id),class:"btn-icon btn-ghost",title:"Lihat"},[g(u(Y),{class:"w-4 h-4"})],8,_t),t("button",{onClick:b=>E(s.id),class:"btn-icon btn-ghost",title:"Edit"},[g(u(Z),{class:"w-4 h-4"})],8,wt),t("button",{onClick:b=>j(s),class:"btn-icon btn-ghost text-accent-danger hover:bg-red-50",title:"Hapus"},[g(u(tt),{class:"w-4 h-4"})],8,yt)])])]))),128)),V.value.length===0?(o(),n("tr",Ct,[...e[14]||(e[14]=[t("td",{colspan:"9",class:"text-center py-12"},[t("div",{class:"empty-state"},[t("p",{class:"text-text-muted"},"Tidak ada data pelanggan")])],-1)])])):S("",!0)])])]),T.value>1?(o(),n("div",St,[t("p",Pt," Menampilkan "+l((i.value-1)*p.value+1)+" - "+l(Math.min(i.value*p.value,h.value.length))+" dari "+l(h.value.length)+" data ",1),t("div",Nt,[t("button",{onClick:e[4]||(e[4]=s=>i.value--),disabled:i.value===1,class:"btn-outline btn-sm"}," Previous ",8,Tt),t("div",Lt,[(o(!0),n(y,null,C(T.value,s=>(o(),n("button",{key:s,onClick:k=>i.value=s,class:B(["w-8 h-8 rounded-lg text-sm font-medium transition-colors",i.value===s?"bg-accent-primary text-white":"text-text-secondary hover:bg-slate-100"])},l(s),11,$t))),128))]),t("button",{onClick:e[5]||(e[5]=s=>i.value++),disabled:i.value===T.value,class:"btn-outline btn-sm"}," Next ",8,Bt)])])):S("",!0)]),x.value?(o(),n("div",{key:0,class:"modal-overlay",onClick:e[7]||(e[7]=Q(s=>x.value=!1,["self"]))},[t("div",Vt,[e[19]||(e[19]=t("div",{class:"modal-header"},[t("h3",{class:"font-semibold text-lg"},"Konfirmasi Hapus")],-1)),t("div",At,[t("p",Dt,[e[16]||(e[16]=_(" Apakah Anda yakin ingin menghapus pelanggan ",-1)),t("strong",Mt,l(f.value?.companyName),1),e[17]||(e[17]=_("? ",-1))]),e[18]||(e[18]=t("p",{class:"text-sm text-text-muted mt-2"},"Tindakan ini tidak dapat dibatalkan.",-1))]),t("div",Et,[t("button",{onClick:e[6]||(e[6]=s=>x.value=!1),class:"btn-outline"}," Batal "),t("button",{onClick:F,class:"btn-danger"}," Hapus ")])])])):S("",!0)]))}});export{qt as default};
