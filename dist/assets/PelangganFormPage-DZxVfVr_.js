import{d as C,B as T,D as h,a as i,b as t,p as w,j as p,t as d,g as o,v as n,A as c,F as g,s as y,G as P,x as B,w as A,E as I,m as S,r as N,k as D,o as r}from"./index-CUmndf2P.js";import{a as L,c as M,s as _,p as K,m}from"./pelanggan-DRJWW-Qu.js";import{A as E}from"./arrow-left-Cpmr9AlM.js";import{S as O}from"./save-B4hMgu_F.js";const j={class:"space-y-6"},q={class:"flex items-center gap-4"},F={class:"text-2xl font-display font-bold text-text-primary"},R={class:"text-text-secondary mt-1"},W={class:"lg:col-span-2 space-y-6"},G={class:"card p-6"},J={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Y={class:"form-group md:col-span-2"},z={class:"form-group md:col-span-2"},H={class:"form-group"},Q=["value"],X={class:"form-group"},Z={class:"form-group"},$={class:"form-group"},ee={class:"card p-6"},te={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},se={class:"form-group"},ae={class:"form-group"},le={class:"form-group"},oe={class:"card p-6"},ne={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ie={class:"form-group"},re={class:"form-group"},de={class:"card p-6"},ue={class:"space-y-6"},pe={class:"card p-6"},me={class:"space-y-4"},ve={class:"form-group"},be=["value"],ce={class:"form-group"},ge={class:"flex gap-4"},ye={class:"flex items-center gap-2 cursor-pointer"},fe={class:"flex items-center gap-2 cursor-pointer"},xe={class:"card p-6"},ke={class:"space-y-4"},we={class:"form-group"},Pe={class:"form-group"},Se=["value"],Ne={class:"card p-6"},Ve={class:"space-y-3"},Ue=["disabled"],Ie=C({__name:"PelangganFormPage",setup(Ce){const f=D(),v=I(),x=T(),u=S(()=>!!v.params.id),V=S(()=>u.value?"Edit Pelanggan":"Tambah Pelanggan"),b=N(!1),a=N({companyName:"",address:"",country:"",city:"",postalCode:"",contactPerson:"",email:"",phone:"",website:"",segment:"new",status:"aktif",creditLimit:0,paymentTerms:"dp_30",npwp:"",nik:"",notes:""});h(()=>{if(u.value&&v.params.id){const l=L(Number(v.params.id));l&&(a.value={companyName:l.companyName,address:l.address,country:l.country,city:l.city,postalCode:l.postalCode,contactPerson:l.contactPerson,email:l.email,phone:l.phone,website:l.website||"",segment:l.segment,status:l.status,creditLimit:l.creditLimit,paymentTerms:l.paymentTerms,npwp:l.npwp||"",nik:l.nik||"",notes:l.notes||""})}});const k=()=>{f.back()},U=async()=>{if(!a.value.companyName||!a.value.contactPerson||!a.value.email){x.error("Mohon lengkapi form yang wajib diisi");return}b.value=!0;try{if(await new Promise(l=>setTimeout(l,500)),u.value){const l=m.findIndex(e=>e.id===Number(v.params.id));if(l!==-1){const e=m[l];m[l]={...e,...a.value,documents:e.documents,totalOrders:e.totalOrders,totalSpent:e.totalSpent,updatedAt:new Date().toISOString()}}}else{const l=Math.max(...m.map(e=>e.id))+1;m.push({id:l,...a.value,documents:[],totalOrders:0,totalSpent:0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})}x.success(u.value?"Pelanggan berhasil diperbarui!":"Pengguna berhasil ditambahkan!"),f.push({name:"pelanggan"})}catch(l){console.error("Error saving buyer:",l)}finally{b.value=!1}};return(l,e)=>(r(),i("div",j,[t("div",q,[t("button",{onClick:k,class:"btn-icon btn-ghost"},[w(p(E),{class:"w-5 h-5"})]),t("div",null,[t("h1",F,d(V.value),1),t("p",R,d(u.value?"Perbarui data pelanggan":"Tambah pelanggan baru"),1)])]),t("form",{onSubmit:A(U,["prevent"]),class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},[t("div",W,[t("div",G,[e[24]||(e[24]=t("h2",{class:"font-semibold text-text-primary mb-4"},"Informasi Perusahaan",-1)),t("div",J,[t("div",Y,[e[17]||(e[17]=t("label",{class:"label label-required"},"Nama Perusahaan",-1)),o(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>a.value.companyName=s),type:"text",class:"input",placeholder:"Contoh: ABC Corporation"},null,512),[[n,a.value.companyName]])]),t("div",z,[e[18]||(e[18]=t("label",{class:"label"},"Alamat",-1)),o(t("textarea",{"onUpdate:modelValue":e[1]||(e[1]=s=>a.value.address=s),class:"textarea",rows:"2",placeholder:"Alamat lengkap..."},null,512),[[n,a.value.address]])]),t("div",H,[e[20]||(e[20]=t("label",{class:"label"},"Negara",-1)),o(t("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>a.value.country=s),class:"select"},[e[19]||(e[19]=t("option",{value:""},"Pilih Negara",-1)),(r(!0),i(g,null,y(p(M),s=>(r(),i("option",{key:s.code,value:s.name},d(s.name),9,Q))),128))],512),[[c,a.value.country]])]),t("div",X,[e[21]||(e[21]=t("label",{class:"label"},"Kota",-1)),o(t("input",{"onUpdate:modelValue":e[3]||(e[3]=s=>a.value.city=s),type:"text",class:"input",placeholder:"Contoh: New York"},null,512),[[n,a.value.city]])]),t("div",Z,[e[22]||(e[22]=t("label",{class:"label"},"Kode Pos",-1)),o(t("input",{"onUpdate:modelValue":e[4]||(e[4]=s=>a.value.postalCode=s),type:"text",class:"input",placeholder:"Contoh: 10001"},null,512),[[n,a.value.postalCode]])]),t("div",$,[e[23]||(e[23]=t("label",{class:"label"},"Website",-1)),o(t("input",{"onUpdate:modelValue":e[5]||(e[5]=s=>a.value.website=s),type:"text",class:"input",placeholder:"https://..."},null,512),[[n,a.value.website]])])])]),t("div",ee,[e[28]||(e[28]=t("h2",{class:"font-semibold text-text-primary mb-4"},"Informasi Kontak",-1)),t("div",te,[t("div",se,[e[25]||(e[25]=t("label",{class:"label label-required"},"Nama Kontak",-1)),o(t("input",{"onUpdate:modelValue":e[6]||(e[6]=s=>a.value.contactPerson=s),type:"text",class:"input",placeholder:"Contoh: John Smith"},null,512),[[n,a.value.contactPerson]])]),t("div",ae,[e[26]||(e[26]=t("label",{class:"label label-required"},"Email",-1)),o(t("input",{"onUpdate:modelValue":e[7]||(e[7]=s=>a.value.email=s),type:"email",class:"input",placeholder:"email@company.com"},null,512),[[n,a.value.email]])]),t("div",le,[e[27]||(e[27]=t("label",{class:"label"},"Telepon",-1)),o(t("input",{"onUpdate:modelValue":e[8]||(e[8]=s=>a.value.phone=s),type:"text",class:"input",placeholder:"+1 234-567-8900"},null,512),[[n,a.value.phone]])])])]),t("div",oe,[e[31]||(e[31]=t("h2",{class:"font-semibold text-text-primary mb-4"},"Dokumen",-1)),t("div",ne,[t("div",ie,[e[29]||(e[29]=t("label",{class:"label"},"NPWP",-1)),o(t("input",{"onUpdate:modelValue":e[9]||(e[9]=s=>a.value.npwp=s),type:"text",class:"input",placeholder:"Nomor NPWP"},null,512),[[n,a.value.npwp]])]),t("div",re,[e[30]||(e[30]=t("label",{class:"label"},"NIK",-1)),o(t("input",{"onUpdate:modelValue":e[10]||(e[10]=s=>a.value.nik=s),type:"text",class:"input",placeholder:"Nomor NIK"},null,512),[[n,a.value.nik]])])])]),t("div",de,[e[32]||(e[32]=t("h2",{class:"font-semibold text-text-primary mb-4"},"Catatan",-1)),o(t("textarea",{"onUpdate:modelValue":e[11]||(e[11]=s=>a.value.notes=s),class:"textarea",rows:"3",placeholder:"Tambahkan catatan jika diperlukan..."},null,512),[[n,a.value.notes]])])]),t("div",ue,[t("div",pe,[e[37]||(e[37]=t("h2",{class:"font-semibold text-text-primary mb-4"},"Segmentasi & Status",-1)),t("div",me,[t("div",ve,[e[33]||(e[33]=t("label",{class:"label"},"Segment",-1)),o(t("select",{"onUpdate:modelValue":e[12]||(e[12]=s=>a.value.segment=s),class:"select"},[(r(!0),i(g,null,y(p(_),s=>(r(),i("option",{key:s.value,value:s.value},d(s.label),9,be))),128))],512),[[c,a.value.segment]])]),t("div",ce,[e[36]||(e[36]=t("label",{class:"label"},"Status",-1)),t("div",ge,[t("label",ye,[o(t("input",{type:"radio",value:"aktif","onUpdate:modelValue":e[13]||(e[13]=s=>a.value.status=s),class:"radio"},null,512),[[P,a.value.status]]),e[34]||(e[34]=t("span",{class:"text-sm"},"Aktif",-1))]),t("label",fe,[o(t("input",{type:"radio",value:"nonaktif","onUpdate:modelValue":e[14]||(e[14]=s=>a.value.status=s),class:"radio"},null,512),[[P,a.value.status]]),e[35]||(e[35]=t("span",{class:"text-sm"},"Non-aktif",-1))])])])])]),t("div",xe,[e[40]||(e[40]=t("h2",{class:"font-semibold text-text-primary mb-4"},"Kredit & Pembayaran",-1)),t("div",ke,[t("div",we,[e[38]||(e[38]=t("label",{class:"label"},"Credit Limit (USD)",-1)),o(t("input",{"onUpdate:modelValue":e[15]||(e[15]=s=>a.value.creditLimit=s),type:"number",class:"input",placeholder:"0"},null,512),[[n,a.value.creditLimit,void 0,{number:!0}]])]),t("div",Pe,[e[39]||(e[39]=t("label",{class:"label"},"Payment Terms",-1)),o(t("select",{"onUpdate:modelValue":e[16]||(e[16]=s=>a.value.paymentTerms=s),class:"select"},[(r(!0),i(g,null,y(p(K),s=>(r(),i("option",{key:s.value,value:s.value},d(s.label),9,Se))),128))],512),[[c,a.value.paymentTerms]])])])]),t("div",Ne,[t("div",Ve,[t("button",{type:"submit",disabled:b.value,class:"btn-primary w-full"},[w(p(O),{class:"w-4 h-4"}),B(" "+d(b.value?"Menyimpan...":"Simpan"),1)],8,Ue),t("button",{type:"button",onClick:k,class:"btn-outline w-full"}," Batal ")])])])],32)]))}});export{Ie as default};
